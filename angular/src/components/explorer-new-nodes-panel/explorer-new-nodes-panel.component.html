<mat-accordion *ngFor="let node of nodeList">
  <mat-expansion-panel hideToggle
                       (opened)="node.isExpanded = true"
                       (closed)="node.isExpanded = false"
                       #mep="matExpansionPanel">
    <mat-expansion-panel-header>
      <div>
        <div class="mat-header-cell">Time</div>
        {{node.timestamp | date: 'd.M.y hh:mm:ss'}}
      </div>
      <div>
        <div class="mat-header-cell">Data</div>
        <div class="resources" *ngIf="node.resources">
          <div *ngFor="let resource of node.resources">
            <div *ngIf="resource.type == resourceTypes.TEMP">{{resource.value}}Â°C</div>
            <div *ngIf="resource.type == resourceTypes.HUMID">{{resource.value}}%</div>
            <div *ngIf="resource.type == resourceTypes.PRESSURE">{{resource.value}} hPa</div>
          </div>
        </div>
      </div>

      <div class="actions">
        <button mat-icon-button>
          <mat-icon [ngStyle]="{'transform': node.isExpanded ? 'rotate(180deg)' : 'rotate(0deg)'}" (click)="mep.expanded = !mep.expanded">expand_more</mat-icon>
        </button>
        <button mat-icon-button (click)="addNode(node)">
          <mat-icon>add</mat-icon>
        </button>
        <button mat-icon-button [matMenuTriggerFor]="actions">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #actions="matMenu">
          <button mat-menu-item>
            <mat-icon>visibility_off</mat-icon>
            <span>Hide</span>
          </button>
          <button mat-menu-item>
            <mat-icon>delete</mat-icon>
            <span>Delete</span>
          </button>
        </mat-menu>
      </div>



    </mat-expansion-panel-header>
  </mat-expansion-panel>
</mat-accordion>

